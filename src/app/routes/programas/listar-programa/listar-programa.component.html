<page-header [title]="'Gestion Programa'"></page-header>

<mat-card class="demo-card" role="group">
    <mat-card-content>
        <div class="customizer-handle">
            <button mat-fab (click)="agregarPrograma()">
                <mat-icon aria-label="Example icon-button with a settings icon">add_circle</mat-icon>
            </button>
        </div>
        <div style="margin-top: 30px;">
            <table datatable [dtOptions]="dtOptions" [dtTrigger]="dtTrigger" class="row-border hover">
                <thead>
                    <tr>
                        <th>Código</th>
                        <th>Nombre</th>
                        <th>Estado</th>
                        <th>Modificar</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let programa of programas">
                        <td style="text-align: center;">{{ programa.codigo }}</td>
                        <td style="text-align: center;">{{ programa.nombre }}</td>
                        <td style="text-align: center;">{{ programa.estado }}</td>
                        <td style="text-align: center;">
                            <a (click)="modificarProgramaDialog(programa)" mat-icon-button
                                aria-label="Activate icon style google search link">
                                <mat-icon>create</mat-icon>
                            </a>

                            <a *ngIf="programa.estado == 'activo'" style="color: green;" mat-icon-button
                                aria-label="Activate icon style google search link">
                                <mat-icon>outlined_flag</mat-icon>
                            </a>

                            <a *ngIf="programa.estado == 'inactivo'" style="color: red;" mat-icon-button
                                aria-label="Activate icon style google search link">
                                <mat-icon>outlined_flag</mat-icon>
                            </a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </mat-card-content>
</mat-card>

<ng-template #agregar>
    <mat-dialog-content style="max-height: 70vh !important;">
        <div fxLayout="row wrap" class="matero-row">
            <div fxFlex="100" fxFlex.lt-sm="100" class="matero-col">
                <mat-card>
                    <mat-card-title>Registro de Programas</mat-card-title>
                    <div style="height: 25px;"></div>
                    <mat-card-content>
                        <form [formGroup]="registrarPrograma" class="matero-form-horizontal">
                            <div fxLayout="row wrap" fxLayoutGap="8px grid">
                                <div fxFlex="50" fxFlex.lt-sm="100">
                                    <mat-form-field
                                        style="padding-left: 15px !important;padding-right: 15px !important;">
                                        <mat-label>Código</mat-label>
                                        <input matInput placeholder="Código" formControlName="codigo" required />
                                        <mat-error *ngIf="registrarPrograma.get('codigo').invalid">Por favor ingresa el
                                            código
                                        </mat-error>
                                    </mat-form-field>
                                </div>

                                <div fxFlex="50" fxFlex.lt-sm="100">
                                    <mat-form-field
                                        style="padding-left: 15px !important;padding-right: 15px !important;">
                                        <mat-label>Nombres</mat-label>
                                        <input matInput placeholder="Nombre" formControlName="nombre" required />
                                        <mat-error *ngIf="registrarPrograma.get('nombre').invalid">Por favor ingresa el
                                            nombre
                                        </mat-error>
                                    </mat-form-field>
                                </div>

                                <div fxFlex="100" fxFlex.lt-sm="100">
                                    <mat-form-field
                                        style="padding-left: 15px !important;padding-right: 15px !important;">
                                        <mat-label>Descripción</mat-label>
                                        <input matInput placeholder="Descripción" formControlName="descripcion" required />
                                        <mat-error *ngIf="registrarPrograma.get('descripcion').invalid">Por favor ingresa la descripccion
                                        </mat-error>
                                    </mat-form-field>
                                </div>

                                
                            </div>
                            <div style="text-align: center; padding-top: 20px;">
                                <button mat-raised-button color="primary" class="m-t-8" style="width: 200px !important;"
                                    (click)="registroExitoso()">
                                    Registrar
                                </button>
                            </div>
                        </form>
                    </mat-card-content>
                </mat-card>
            </div>
        </div>
    </mat-dialog-content>
</ng-template>

<ng-template #modificar>
    <mat-dialog-content style="max-height: 70vh !important;">
        <div fxLayout="row wrap" class="matero-row">
            <div fxFlex="100" fxFlex.lt-sm="100" class="matero-col">
                <mat-card>
                    <mat-card-title>Modificar programa</mat-card-title>
                    <div style="height: 25px;"></div>
                    <mat-card-content>
                        <form [formGroup]="modificarPrograma" class="matero-form-horizontal">
                            <div fxLayout="row wrap" fxLayoutGap="8px grid">
                                <div fxFlex="50" fxFlex.lt-sm="100">
                                    <mat-form-field
                                        style="padding-left: 15px !important;padding-right: 15px !important;">
                                        <mat-label>Código</mat-label>
                                        <input matInput placeholder="Código" formControlName="codigo" required />
                                        <mat-error *ngIf="modificarPrograma.get('codigo').invalid">Por favor ingresa el
                                            código
                                        </mat-error>
                                    </mat-form-field>
                                </div>

                                <div fxFlex="50" fxFlex.lt-sm="100">
                                    <mat-form-field
                                        style="padding-left: 15px !important;padding-right: 15px !important;">
                                        <mat-label>Nombre</mat-label>
                                        <input matInput placeholder="Nombre" formControlName="nombre" required />
                                        <mat-error *ngIf="modificarPrograma.get('nombre').invalid">Por favor ingresa el
                                            nombre
                                        </mat-error>
                                    </mat-form-field>
                                </div>

                                <div fxFlex="100" fxFlex.lt-sm="100">
                                    <mat-form-field
                                        style="padding-left: 15px !important;padding-right: 15px !important;">
                                        <mat-label>Descripción</mat-label>
                                        <input matInput placeholder="Descripción" formControlName="descripcion" required />
                                        <mat-error *ngIf="modificarPrograma.get('descripcion').invalid">Por favor ingresa la descripccion
                                        </mat-error>
                                    </mat-form-field>
                                </div>
                            </div>
                            <div style="text-align: center; padding-top: 20px;">
                                <button mat-raised-button color="primary" class="m-t-8" style="width: 200px !important;"
                                    (click)="registroExitoso()">
                                    Guardar Cambios
                                </button>
                            </div>
                        </form>
                    </mat-card-content>
                </mat-card>
            </div>
        </div>
    </mat-dialog-content>
</ng-template>