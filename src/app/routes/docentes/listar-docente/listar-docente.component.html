<page-header [title]="'Gestion Docente'"></page-header>

<mat-card class="demo-card" role="group">
  <mat-card-content>
    <div class="customizer-handle">
      <button mat-fab (click)="agregarDocente()">
        <mat-icon aria-label="Example icon-button with a settings icon">add_circle</mat-icon>
      </button>
    </div>
    <div style="margin-top: 30px;">
      <table datatable [dtOptions]="dtOptions" [dtTrigger]="dtTrigger" class="row-border hover">
        <thead>
          <tr>
            <th>Código</th>
            <th>Nombre</th>
            <th>Dependencia</th>
            <th>Contrato</th>
            <th>Estado</th>
            <th>Modificar</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let docente of docentes">
            <td style="text-align: center;">{{ docente.codigo }}</td>
            <td style="text-align: center;">{{ docente.nombre }} {{ docente.apellido }}</td>
            <td style="text-align: center;">{{ docente.dependencia }}</td>
            <td style="text-align: center;">{{ docente.contrato }}</td>
            <td style="text-align: center;">{{ docente.estado }}</td>
            <td style="text-align: center;">
              <a
                (click)="modificarDocenteDialog(docente)"
                mat-icon-button
                aria-label="Activate icon style google search link"
              >
                <mat-icon>create</mat-icon>
              </a>

              <a
                *ngIf="docente.estado == 'activo'"
                style="color: green;"
                mat-icon-button
                aria-label="Activate icon style google search link"
              >
                <mat-icon>outlined_flag</mat-icon>
              </a>

              <a
                *ngIf="docente.estado == 'inactivo'"
                style="color: red;"
                mat-icon-button
                aria-label="Activate icon style google search link"
              >
                <mat-icon>outlined_flag</mat-icon>
              </a>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </mat-card-content>
</mat-card>

<ng-template #agregar>
  <mat-dialog-content style="max-height: 70vh !important;">
    <div fxLayout="row wrap" class="matero-row">
      <div fxFlex="100" fxFlex.lt-sm="100" class="matero-col">
        <mat-card>
          <mat-card-title>Registro de Docente</mat-card-title>
          <div style="height: 25px;"></div>
          <mat-card-content>
            <form [formGroup]="registrarDocente" class="matero-form-horizontal">
              <div fxLayout="row wrap" fxLayoutGap="8px grid">
                <div fxFlex="50" fxFlex.lt-sm="100">
                  <mat-form-field
                    style="padding-left: 15px !important;padding-right: 15px !important;"
                  >
                    <mat-label>Código</mat-label>
                    <input matInput placeholder="Código" formControlName="codigo" required />
                    <mat-error *ngIf="registrarDocente.get('codigo').invalid"
                      >Por favor ingresa el código
                    </mat-error>
                  </mat-form-field>
                </div>

                <div fxFlex="50" fxFlex.lt-sm="100">
                  <mat-form-field
                    style="padding-left: 15px !important;padding-right: 15px !important;"
                  >
                    <mat-label>Nombres</mat-label>
                    <input matInput placeholder="Nombre" formControlName="nombre" required />
                    <mat-error *ngIf="registrarDocente.get('nombre').invalid"
                      >Por favor ingresa el nombre
                    </mat-error>
                  </mat-form-field>
                </div>
                <div fxFlex="50" fxFlex.lt-sm="100">
                  <mat-form-field
                    style="padding-left: 15px !important;padding-right: 15px !important;"
                  >
                    <mat-label>Apellidos</mat-label>
                    <input matInput placeholder="Apellidos" formControlName="apellido" required />
                    <mat-error *ngIf="registrarDocente.get('apellido').invalid"
                      >Por favor ingresa el nombre
                    </mat-error>
                  </mat-form-field>
                </div>

                <div fxFlex="50" fxFlex.lt-sm="100">
                  <mat-form-field
                    style="padding-left: 15px !important;padding-right: 15px !important;"
                  >
                    <mat-label>Correo</mat-label>
                    <input matInput placeholder="Correo" formControlName="email" required />
                    <mat-error *ngIf="registrarDocente.get('email').invalid">
                      {{ getErrorMessage(registrarDocente) }}</mat-error
                    >
                  </mat-form-field>
                </div>

                <div fxFlex="50" fxFlex.lt-sm="100">
                  <mat-form-field
                    style="padding-left: 15px !important;padding-right: 15px !important;"
                  >
                    <mat-label>Teléfono</mat-label>
                    <input
                      matInput
                      placeholder="Teléfono"
                      type="number"
                      formControlName="mobile"
                      required
                    />
                    <mat-icon matSuffix>smartphone</mat-icon>
                    <mat-error *ngIf="registrarDocente.get('mobile').invalid"
                      >Please enter mobile
                    </mat-error>
                  </mat-form-field>
                </div>

                <div fxFlex="50" fxFlex.lt-sm="100">
                  <mat-form-field
                    style="padding-left: 15px !important;padding-right: 15px !important;"
                  >
                    <mat-label>Cargo</mat-label>
                    <mat-select required formControlName="cargo" required>
                      <mat-option>-- Seleccione --</mat-option>
                      <mat-option value="1">Docente</mat-option>
                      <mat-option value="2">female</mat-option>
                    </mat-select>
                    <mat-error *ngIf="registrarDocente.get('cargo').invalid"
                      >Por favor selecciona el cargo
                    </mat-error>
                  </mat-form-field>
                </div>

                <div fxFlex="50" fxFlex.lt-sm="100">
                  <mat-form-field
                    style="padding-left: 15px !important;padding-right: 15px !important;"
                  >
                    <mat-label>Dependencia</mat-label>
                    <mat-select required formControlName="dependencia" required>
                      <mat-option>-- Seleccione --</mat-option>
                      <mat-option value="1">Docente</mat-option>
                      <mat-option value="2">female</mat-option>
                    </mat-select>

                    <mat-error *ngIf="registrarDocente.get('dependencia').invalid"
                      >Por favor selecciona la dependencia
                    </mat-error>
                  </mat-form-field>
                </div>

                <div fxFlex="50" fxFlex.lt-sm="100">
                  <mat-form-field
                    style="padding-left: 15px !important;padding-right: 15px !important;"
                  >
                    <mat-label>Tipo de contrato</mat-label>
                    <mat-select required formControlName="contrato" required>
                      <mat-option>-- None --</mat-option>
                      <mat-option value="1">male</mat-option>
                      <mat-option value="2">female</mat-option>
                    </mat-select>
                    <mat-error *ngIf="registrarDocente.get('contrato').invalid"
                      >Por favor selecciona el tipo de contrato
                    </mat-error>
                  </mat-form-field>
                </div>
              </div>
              <div style="text-align: center; padding-top: 20px;">
                <button
                  mat-raised-button
                  color="primary"
                  class="m-t-8"
                  style="width: 200px !important;"
                  (click)="registroExitoso()"
                >
                  Registrar
                </button>
              </div>
            </form>
          </mat-card-content>
        </mat-card>
      </div>
    </div>
  </mat-dialog-content>
</ng-template>

<ng-template #modificar>
  <mat-dialog-content style="max-height: 70vh !important;">
    <div fxLayout="row wrap" class="matero-row">
      <div fxFlex="100" fxFlex.lt-sm="100" class="matero-col">
        <mat-card>
          <mat-card-title>Modificar Docente</mat-card-title>
          <div style="height: 25px;"></div>
          <mat-card-content>
            <form [formGroup]="modificarDocente" class="matero-form-horizontal">
              <div fxLayout="row wrap" fxLayoutGap="8px grid">
                <div fxFlex="50" fxFlex.lt-sm="100">
                  <mat-form-field
                    style="padding-left: 15px !important;padding-right: 15px !important;"
                  >
                    <mat-label>Código</mat-label>
                    <input matInput placeholder="Código" formControlName="codigo" required />
                    <mat-error *ngIf="modificarDocente.get('codigo').invalid"
                      >Por favor ingresa el código
                    </mat-error>
                  </mat-form-field>
                </div>

                <div fxFlex="50" fxFlex.lt-sm="100">
                  <mat-form-field
                    style="padding-left: 15px !important;padding-right: 15px !important;"
                  >
                    <mat-label>Nombre</mat-label>
                    <input matInput placeholder="Nombre" formControlName="nombre" required />
                    <mat-error *ngIf="modificarDocente.get('nombre').invalid"
                      >Por favor ingresa el nombre
                    </mat-error>
                  </mat-form-field>
                </div>

                <div fxFlex="50" fxFlex.lt-sm="100">
                  <mat-form-field
                    style="padding-left: 15px !important;padding-right: 15px !important;"
                  >
                    <mat-label>Correo</mat-label>
                    <input matInput placeholder="Correo" formControlName="email" required />
                    <mat-error *ngIf="modificarDocente.get('email').invalid">
                      {{ getErrorMessage(modificarDocente) }}</mat-error
                    >
                  </mat-form-field>
                </div>

                <div fxFlex="50" fxFlex.lt-sm="100">
                  <mat-form-field
                    style="padding-left: 15px !important;padding-right: 15px !important;"
                  >
                    <mat-label>Teléfono</mat-label>
                    <input
                      matInput
                      placeholder="Teléfono"
                      type="number"
                      formControlName="mobile"
                      required
                    />
                    <mat-icon matSuffix>smartphone</mat-icon>
                    <mat-error *ngIf="modificarDocente.get('mobile').invalid"
                      >Por favor ingrese el celular
                    </mat-error>
                  </mat-form-field>
                </div>

                <div fxFlex="50" fxFlex.lt-sm="100">
                  <mat-form-field
                    style="padding-left: 15px !important;padding-right: 15px !important;"
                  >
                    <mat-label>Cargo</mat-label>
                    <mat-select required formControlName="cargo" required>
                      <mat-option>-- Seleccione --</mat-option>
                      <mat-option value="1">Docente</mat-option>
                      <mat-option value="2">female</mat-option>
                    </mat-select>
                    <mat-error *ngIf="modificarDocente.get('cargo').invalid"
                      >Por favor selecciona el cargo
                    </mat-error>
                  </mat-form-field>
                </div>

                <div fxFlex="50" fxFlex.lt-sm="100">
                  <mat-form-field
                    style="padding-left: 15px !important;padding-right: 15px !important;"
                  >
                    <mat-label>Dependencia</mat-label>
                    <mat-select [(value)]="prueba" formControlName="dependencia" required>
                      <mat-option>-- Seleccione --</mat-option>
                      <mat-option value="1">Docente</mat-option>
                      <mat-option value="2">female</mat-option>
                    </mat-select>
                    <mat-error *ngIf="modificarDocente.get('dependencia').invalid"
                      >Por favor selecciona la dependencia
                    </mat-error>
                  </mat-form-field>
                </div>

                <div fxFlex="50" fxFlex.lt-sm="100">
                  <mat-form-field
                    style="padding-left: 15px !important;padding-right: 15px !important;"
                  >
                    <mat-label>Tipo de contrato</mat-label>
                    <mat-select required formControlName="contrato" required>
                      <mat-option>-- None --</mat-option>
                      <mat-option value="1">male</mat-option>
                      <mat-option value="2">female</mat-option>
                    </mat-select>
                    <mat-error *ngIf="modificarDocente.get('contrato').invalid"
                      >Por favor selecciona el tipo de contrato
                    </mat-error>
                  </mat-form-field>
                </div>
              </div>
              <div style="text-align: center; padding-top: 20px;">
                <button
                  mat-raised-button
                  color="primary"
                  class="m-t-8"
                  style="width: 200px !important;"
                  (click)="registrar()"
                >
                  Guardar Cambios
                </button>
              </div>
            </form>
          </mat-card-content>
        </mat-card>
      </div>
    </div>
  </mat-dialog-content>
</ng-template>
